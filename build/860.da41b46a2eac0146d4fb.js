"use strict";(self.webpackChunkpayload_blog=self.webpackChunkpayload_blog||[]).push([[860],{3860:(e,l,o)=>{o.r(l),o.d(l,{default:()=>b});var t=o(7294),a=o(9243),n=o(5091),s=o(2143),i=o(5977),c=o(8584),r=o(4479);o(6456);const d="card",u=e=>{const{title:l,actions:o,onClick:a}=e,n=[d,a&&`${d}--has-onclick`].filter(Boolean).join(" ");return t.createElement("div",{className:n},t.createElement("h5",null,l),o&&t.createElement("div",{className:`${d}__actions`},o),a&&t.createElement(r.Z,{className:`${d}__click`,buttonStyle:"none",onClick:a}))};o(5634);const m="dashboard",v=e=>{const{collections:l,globals:o,permissions:n}=e,{push:s}=(0,i.k6)(),{routes:{admin:d}}=(0,a.useConfig)();return t.createElement("div",{className:m},t.createElement(c.Z,null),t.createElement("div",{className:"dashboard__wrap"},t.createElement("h3",{className:"dashboard__label"},"Collections"),t.createElement("ul",{className:"dashboard__card-list"},l.map((e=>{var l,o,a;const i=null===(a=null===(o=null===(l=null==n?void 0:n.collections)||void 0===l?void 0:l[e.slug])||void 0===o?void 0:o.create)||void 0===a?void 0:a.permission;return t.createElement("li",{key:e.slug},t.createElement(u,{title:e.labels.plural,onClick:()=>s({pathname:`${d}/collections/${e.slug}`}),actions:i?t.createElement(r.Z,{el:"link",to:`${d}/collections/${e.slug}/create`,icon:"plus",round:!0,buttonStyle:"icon-label",iconStyle:"with-border"}):void 0}))}))),o.length>0&&t.createElement(t.Fragment,null,t.createElement("h3",{className:"dashboard__label"},"Globals"),t.createElement("ul",{className:"dashboard__card-list"},o.map((e=>t.createElement("li",{key:e.slug},t.createElement(u,{title:e.label,onClick:()=>s({pathname:`${d}/globals/${e.slug}`})}))))))))},b=()=>{const{permissions:e}=(0,a.useAuth)(),{setStepNav:l}=(0,n.FP)(),[o,i]=(0,t.useState)([]),{collections:c,globals:r,admin:{components:{views:{Dashboard:d}={Dashboard:void 0}}={}}={}}=(0,a.useConfig)();return(0,t.useEffect)((()=>{i(r.filter((l=>{var o,t,a;return null===(a=null===(t=null===(o=null==e?void 0:e.globals)||void 0===o?void 0:o[l.slug])||void 0===t?void 0:t.read)||void 0===a?void 0:a.permission})))}),[e,r]),(0,t.useEffect)((()=>{l([])}),[l]),t.createElement(s.Z,{DefaultComponent:v,CustomComponent:d,componentProps:{globals:o,collections:c.filter((l=>{var o,t,a;return null===(a=null===(t=null===(o=null==e?void 0:e.collections)||void 0===o?void 0:o[l.slug])||void 0===t?void 0:t.read)||void 0===a?void 0:a.permission})),permissions:e}})}}}]);